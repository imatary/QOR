 //Bluetooth.h

 // Copyright Querysoft Limited 2016
 //
 // Permission is hereby granted, free of charge, to any person or organization
 // obtaining a copy of the software and accompanying documentation covered by
 // this license (the "Software") to use, reproduce, display, distribute,
 // execute, and transmit the Software, and to prepare derivative works of the
 // Software, and to permit third-parties to whom the Software is furnished to
 // do so, all subject to the following:
 // 
 // The copyright notices in the Software and this entire statement, including
 // the above license grant, this restriction and the following disclaimer,
 // must be included in all copies of the Software, in whole or in part, and
 // all derivative works of the Software, unless such copies or derivative
 // works are solely in the form of machine-executable object code generated by
 // a source language processor.
 // 
 // THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 // IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 // FITNESS FOR A PARTICULAR PURPOSE, TITLE AND NON-INFRINGEMENT. IN NO EVENT
 // SHALL THE COPYRIGHT HOLDERS OR ANYONE DISTRIBUTING THE SOFTWARE BE LIABLE
 // FOR ANY DAMAGES OR OTHER LIABILITY, WHETHER IN CONTRACT, TORT OR OTHERWISE,
 // ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 // DEALINGS IN THE SOFTWARE.

 //Bluetooth SubSystem

#ifdef	__QCMP_OPTIMIZEINCLUDE
#pragma	__QCMP_OPTIMIZEINCLUDE
#endif//__QCMP_OPTIMIZEINCLUDE

#ifndef APPOCRITAQOR_SUBSYSTEMS_BLUETOOTH_H_3
#define APPOCRITAQOR_SUBSYSTEMS_BLUETOOTH_H_3

#include "AppocritaQOR/SubSystem.h"
#include "AppocritaQOR/Event.h"
#include "AppocritaQOR/SubSystems/IBluetooth.h"

__QOR_DECLARE_REF(nsQOR, __APPOCRITA, CBluetoothServiceClient, CTRef);

 //------------------------------------------------------------------------------
namespace nsQOR
{
	//------------------------------------------------------------------------------
	class __QOR_INTERFACE( __APPOCRITA ) CBluetooth : public CSubSystem
	{
	public:

		__QOR_DECLARE_OCLASS_ID( CBluetooth );

		__QOR_IMPL_REF( CBluetooth );

		CBluetooth();
		virtual ~CBluetooth(){};
		virtual void ScanForDevices(void);
		virtual void RegisterServiceClient(nsCodeQOR::mxGUID& ServiceUUID, _reftype(IBluetoothServiceClient) Client);
		virtual void UnregisterServiceClient(nsCodeQOR::mxGUID& ServiceUUID, _reftype(IBluetoothServiceClient) Client);

	private:

		CBluetooth( const CBluetooth& );
		CBluetooth& operator = ( const CBluetooth& );
	};
	
	//------------------------------------------------------------------------------
	class __QOR_INTERFACE(__APPOCRITA) CBluetoothServiceClient : public IBluetoothServiceClient
	{
	public:

		__QOR_DECLARE_OCLASS_ID( CBluetoothServiceClient );

		CBluetoothServiceClient(nsCodeQOR::mxGUID* serviceID);
		virtual ~CBluetoothServiceClient();

		virtual void Register();
		virtual void UnRegister();
		virtual void AttachDevice(IBluetoothRemoteDevice::ref_type Device);

	protected:

		nsCodeQOR::mxGUID* m_pServiceID;

	private:

		CBluetoothServiceClient() = delete;
		CBluetoothServiceClient( const CBluetoothServiceClient& src) = delete;
		CBluetoothServiceClient& operator = (const CBluetoothServiceClient& src) = delete;
	};

}//nsQOR

#endif//APPOCRITAQOR_SUBSYSTEMS_BLUETOOTH_H_3
